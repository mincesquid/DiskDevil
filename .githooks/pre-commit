#!/usr/bin/env bash
# Pre-commit hook: run project checks and block commit on failure
set -euo pipefail

# Resolve repository root
REPO_ROOT=$(git rev-parse --show-toplevel)
HOOK_DIR="$REPO_ROOT/.githooks"

echo "Running pre-commit checks..."

"$REPO_ROOT/scripts/run_checks.sh"

EXIT_CODE=$?
if [ $EXIT_CODE -ne 0 ]; then
  echo "Pre-commit checks failed. Commit aborted."
  exit $EXIT_CODE
fi

echo "Pre-commit checks passed. Proceeding with commit."
exit 0
